<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choose Your Plan - Sanctus Videre</title>
    
    <!-- Add your favicon and other common head elements -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #0f1a2b;
            color: #fff;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Subtle grid background */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -1;
        }
        
        /* Glowing effect in background */
        body::after {
            content: '';
            position: absolute;
            top: 35%;
            left: 30%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(89, 86, 233, 0.15) 0%, rgba(15, 26, 43, 0) 70%);
            z-index: -1;
            filter: blur(50px);
        }
        
        /* Header styling */
        header {
            background-color: rgba(15, 26, 43, 0.7);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .logo {
            max-height: 50px;
            transition: transform 0.3s ease;
        }
        
        .logo:hover {
            transform: scale(1.05);
        }
        
        /* Plans container */
        .plans-container {
            max-width: 1200px;
            margin: 4rem auto;
            padding: 1rem;
        }
        
        .plans-header {
            text-align: center;
            margin-bottom: 4rem;
            position: relative;
        }
        
        .plans-header h1 {
            font-size: 3.2rem;
            margin-bottom: 1rem;
            color: #fff;
            font-weight: 700;
            letter-spacing: -0.5px;
            background: linear-gradient(135deg, #5956E9 0%, #9491FF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            display: inline-block;
            z-index: 2;
            text-shadow: 0 5px 15px rgba(89, 86, 233, 0.4);
        }
        
        .plans-header h1::after {
            content: '';
            position: absolute;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, #5956E9, #9491FF);
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }
        
        .plans-header p {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
            max-width: 800px;
            margin: 1.5rem auto 0;
            font-weight: 300;
            line-height: 1.5;
        }
        
        /* Plans grid */
        .plans-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2.5rem;
        }
        
        .plan-card {
            background: rgba(30, 40, 60, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 14px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1),
                        inset 0 0 0 1px rgba(255, 255, 255, 0.05);
            padding: 2.5rem;
            width: 340px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .plan-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #5956E9, #9491FF);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }
        
        .plan-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1),
                        inset 0 0 0 1px rgba(255, 255, 255, 0.1);
        }
        
        .plan-card:hover::before {
            transform: scaleX(1);
        }
        
        .plan-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #fff;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .plan-name::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: rgba(89, 86, 233, 0.6);
            border-radius: 2px;
        }
        
        .plan-price {
            font-size: 3.5rem;
            font-weight: 700;
            margin: 1.5rem 0 0.3rem;
            color: #5956E9;
            background: linear-gradient(135deg, #5956E9 0%, #9491FF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -1px;
        }
        
        .plan-period {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 2rem;
            font-weight: 400;
        }
        
        .plan-description {
            margin-bottom: 2rem;
            flex-grow: 1;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95rem;
        }
        
        .plan-select-btn {
            background: linear-gradient(135deg, #5956E9 0%, #6e6bff 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            box-shadow: 0 4px 20px rgba(89, 86, 233, 0.3);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .plan-select-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
            transition: all 0.6s ease;
            z-index: -1;
        }
        
        .plan-select-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(89, 86, 233, 0.5);
        }
        
        .plan-select-btn:hover::before {
            left: 100%;
        }
        
        .plan-select-btn:active {
            transform: translateY(1px);
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .plans-grid {
                flex-direction: column;
                align-items: center;
            }
            
            .plan-card {
                width: 100%;
                max-width: 400px;
            }
            
            .plans-header h1 {
                font-size: 2.5rem;
            }
        }
        
        .back-link {
            display: inline-block;
            margin-top: 3rem;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            position: relative;
            padding-left: 25px;
        }
        
        .back-link:hover {
            color: #5956E9;
        }
        
        .back-link::before {
            content: '‚Üê';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            transition: all 0.3s ease;
        }
        
        .back-link:hover::before {
            left: -5px;
        }
        
        /* Floating elements for visual interest */
        .floating-element {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            z-index: -1;
        }
        
        .float-1 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, #5956E9 0%, rgba(89, 86, 233, 0) 70%);
            top: 10%;
            right: -150px;
            animation: float 15s ease-in-out infinite;
        }
        
        .float-2 {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, #5956E9 0%, rgba(89, 86, 233, 0) 70%);
            bottom: 10%;
            left: -100px;
            animation: float 20s ease-in-out infinite reverse;
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(10px, 15px) rotate(5deg); }
            50% { transform: translate(5px, -10px) rotate(10deg); }
            75% { transform: translate(-10px, 5px) rotate(5deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }
    </style>
</head>
<body>
    <!-- Floating background elements -->
    <div class="floating-element float-1"></div>
    <div class="floating-element float-2"></div>
    
    <!-- Header with logo -->
    <header>
        <a href="index.html">
            <img src="images/sanctus-videre-logo.png" alt="Sanctus Videre" class="logo">
        </a>
    </header>
    
    <div class="plans-container">
        <div class="plans-header">
            <h1>Choose Your Plan</h1>
            <p>Select the subscription option that best fits your needs</p>
        </div>
        
        <div class="plans-grid">
            <!-- Daily Plan -->
            <div class="plan-card">
                <h2 class="plan-name">Daily Subscription</h2>
                <div class="plan-price">$10</div>
                <div class="plan-period">per day</div>
                <div class="plan-description">
                    Perfect for users to try out, get comfortable with the interface, start experimenting with how to ask a question and what to ask to get the most out of Sanctus Videre which makes a huge difference in output. This daily recurring subscription provides you a low initial payment to give Sanctus Videre a go which you can cancel at any time! You've got unlimited drawings upload and unlimited questions with analysis until you cancel.
                </div>
                <button class="plan-select-btn" data-plan="daily">Select Daily Plan</button>
            </div>
            
            <!-- Weekly Plan -->
            <div class="plan-card">
                <h2 class="plan-name">Weekly Subscription</h2>
                <div class="plan-price">$70</div>
                <div class="plan-period">per week</div>
                <div class="plan-description">
                    You've tried out Sanctus Videre for a couple of days and you're truly pumped with the productivity potential you can get out of it. You want to try Sanctus Videre on a specific project for an extended period to test it out further. This is the perfect solution for you with minimal financial risk. You will be charged weekly on a recurring basis and can cancel at any time! You will have unlimited drawings upload and unlimited questions with analysis until you cancel.
                </div>
                <button class="plan-select-btn" data-plan="weekly">Select Weekly Plan</button>
            </div>
            
            <!-- Monthly Plan -->
            <div class="plan-card">
                <h2 class="plan-name">Monthly Subscription</h2>
                <div class="plan-price">$300</div>
                <div class="plan-period">per month</div>
                <div class="plan-description">
                    You've figured out how to get the best out of Sanctus Videre. You've mastered how to ask questions and what to ask. You know what drawings to select for analysis, and you've built a strong memory bank for your project. You know exactly how to use the output to make your job more efficient and more productive. Sanctus Videre is an essential tool in your toolkit and you use it frequently. Unlimited drawings, questions/analysis. You will be charged on a monthly recurring basis until you cancel.
                </div>
                <button class="plan-select-btn" data-plan="monthly">Select Monthly Plan</button>
            </div>
        </div>
        
        <a href="index.html" class="back-link">Back to Home</a>
    </div>
    
    <!-- Auth0 script -->
    <script src="https://cdn.auth0.com/js/lock/12.0/lock.min.js"></script>
    
    <!-- Main script -->
    <script src="js/main.js"></script>
    
    <script>
        // Plans page specific script
        document.addEventListener('DOMContentLoaded', function() {
            // Get userId from URL if available
            const urlParams = new URLSearchParams(window.location.search);
            const userId = urlParams.get('user_id');
            
            // Define the redirectToPayment function directly in plans.html
            function redirectToPayment(email, userId, plan = 'monthly') {
                console.log("Redirecting to plan:", plan);
                
                // Use the same STRIPE_CONFIG from main.js
                const STRIPE_CONFIG = {
                    paymentLinks: {
                        daily: "https://buy.stripe.com/7sY8wQ8QK8OFfi7cUP3gk01",
                        weekly: "https://buy.stripe.com/6oU9AUd702qh0nddYT3gk02",
                        monthly: "https://buy.stripe.com/cN2aFI9XK2r2gAofYY"
                    }
                };
                
                const AUTH0_CONFIG = {
                    domain: "dev-wl2dxopsswbbvkcb.us.auth0.com",
                    clientId: "BAXPcs4GZAZodDtErS0UxTmugyxbEcZU",
                    mainUrl: "https://sanctusvidere.com",
                    appUrl: "https://app.sanctusvidere.com"
                };
                
                // Get the correct payment link based on the plan
                const paymentLink = STRIPE_CONFIG.paymentLinks[plan];
                console.log("Payment link for " + plan + ":", paymentLink);
                
                // Construct the payment link with success/cancel URLs
                const successUrl = encodeURIComponent(`${AUTH0_CONFIG.appUrl}?payment_status=success&user_id=${userId}&plan=${plan}`);
                const cancelUrl = encodeURIComponent(AUTH0_CONFIG.mainUrl);
                
                // Create the full URL with parameters
                let paymentUrl = paymentLink;
                
                // Add client_reference_id if the link doesn't have parameters yet
                if (!paymentUrl.includes('?')) {
                    paymentUrl += `?client_reference_id=${userId}`;
                } else {
                    paymentUrl += `&client_reference_id=${userId}`;
                }
                
                // Add success and cancel URLs
                paymentUrl += `&success_url=${successUrl}&cancel_url=${cancelUrl}`;
                
                // Redirect to payment
                console.log(`Redirecting to payment:`, paymentUrl);
                window.location.href = paymentUrl;
            }
            
            // Add click handlers to all plan buttons
            const planButtons = document.querySelectorAll('.plan-select-btn');
            planButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const planType = this.getAttribute('data-plan');
                    console.log("Button clicked with plan:", planType);
                    
                    if (userId) {
                        // User is already authenticated, redirect directly to payment
                        console.log("Redirecting to payment with plan:", planType);
                        redirectToPayment(null, userId, planType);
                    } else {
                        // User is not authenticated, show login first
                        // Store the selected plan in localStorage to use after auth
                        console.log("Storing plan for after auth:", planType);
                        localStorage.setItem('selected_plan', planType);
                        // Here you would need to call login() from main.js
                        if (typeof login === 'function') {
                            login();
                        } else {
                            // Fallback - redirect to login page or show error
                            alert("Login function not available. Please try again later.");
                        }
                    }
                });
            });
            
            // Add subtle hover effects to plan cards
            const planCards = document.querySelectorAll('.plan-card');
            planCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    planCards.forEach(c => {
                        if (c !== this) {
                            c.style.opacity = '0.7';
                            c.style.transform = 'scale(0.98)';
                        }
                    });
                });
                
                card.addEventListener('mouseleave', function() {
                    planCards.forEach(c => {
                        c.style.opacity = '1';
                        c.style.transform = '';
                    });
                });
            });
        });
    </script>
</body>
</html>
